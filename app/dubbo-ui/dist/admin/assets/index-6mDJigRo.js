import{d as D,v as R,u as S,x as T,y as N,r as k,W as E,c as o,b as t,w as n,n as r,P as V,R as $,e as x,o as s,f as i,j as G,I as O,t as C,Q as p,J as h,_ as A}from"./index-hmLAZQYT.js";import{i as B,j as P}from"./traffic-C2a-KjHH.js";import{S as Y,a as j,s as f}from"./SearchUtil-sOWd6ofa.js";import"./request-8jI_GZey.js";const J={class:"__container_traffic_config_index"},M=["onClick"],F=D({__name:"index",setup(K){R(e=>({"2f10a2da":r(V)}));const c=S(),v=T(N.PROVIDE_INJECT_KEY);v.dynamicConfigForm=k({});let I=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,a)=>f(e.appName,a.appName),width:200,ellipsis:!0},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,a)=>a.isService?"服务":"应用",width:100,sorter:(e,a)=>f(e.instanceNum,a.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:200,sorter:(e,a)=>f(e.instanceNum,a.instanceNum)},{title:"enabled",key:"enabled",dataIndex:"enabled",render:(e,a)=>a.enabled?"是":"否",width:120,sorter:(e,a)=>f(e.instanceNum,a.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const l=k(new Y([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],B,I)),g=()=>{c.push("/traffic/dynamicConfig/formview/_tmp/1")};E(async()=>{await l.onSearch()});const w=async e=>{await P({name:e.ruleName}),await l.onSearch()};return $(N.SEARCH_DOMAIN,l),(e,a)=>{const d=x("a-button"),b=x("a-popconfirm");return s(),o("div",J,[t(j,{"search-domain":l},{customOperation:n(()=>[t(d,{type:"primary",onClick:g},{default:n(()=>[i("新增动态配置")]),_:1})]),bodyCell:n(({text:_,column:m,record:u})=>[m.dataIndex==="ruleName"?(s(),o("span",{key:0,class:"config-link",onClick:y=>r(c).push(`/traffic/dynamicConfig/formview/${u.ruleName}/0`)},[G("b",null,[t(r(O),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),i(" "+C(_),1)])],8,M)):p("",!0),m.dataIndex==="ruleGranularity"?(s(),o(h,{key:1},[i(C(_?"服务":"应用"),1)],64)):p("",!0),m.dataIndex==="enabled"?(s(),o(h,{key:2},[i(C(_?"启用":"禁用"),1)],64)):p("",!0),m.dataIndex==="operation"?(s(),o(h,{key:3},[t(d,{type:"link",onClick:y=>r(c).push(`/traffic/dynamicConfig/formview/${u.ruleName}/0`)},{default:n(()=>[i("查看")]),_:2},1032,["onClick"]),t(d,{type:"link",onClick:y=>r(c).push(`/traffic/dynamicConfig/formview/${u.ruleName}/1`)},{default:n(()=>[i(" 修改 ")]),_:2},1032,["onClick"]),t(b,{title:"确认删除该动态配置？","ok-text":"Yes","cancel-text":"No",onConfirm:y=>w(u)},{default:n(()=>[t(d,{type:"link"},{default:n(()=>[i("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):p("",!0)]),_:1},8,["search-domain"])])}}}),q=A(F,[["__scopeId","data-v-25acc517"]]);export{q as default};
