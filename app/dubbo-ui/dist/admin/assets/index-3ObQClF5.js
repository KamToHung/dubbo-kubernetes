import{d as w,v as S,x as T,y as h,r as g,W as E,c as l,b as n,w as o,n as r,P as V,R as $,e as C,o as c,X as p,f as a,j as D,I as A,t as _,Q as u,J as f,_ as B}from"./index-hmLAZQYT.js";import{s as G,d as O}from"./traffic-C2a-KjHH.js";import{S as P,a as Y,s as y}from"./SearchUtil-sOWd6ofa.js";import{f as F}from"./DateUtil-BI1mUH_z.js";import"./request-8jI_GZey.js";const J={class:"routing-rule-container"},M=["onClick"],j=w({__name:"index",setup(K){S(e=>({"5abc36e7":r(V)}));const N=T(h.PROVIDE_INJECT_KEY);let I=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,t)=>y(e.appName,t.appName),width:140},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,t)=>t.isService?"服务":"应用",width:100,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:120,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"enabled",key:"enabled",dataIndex:"enabled",width:120,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const d=g(new P([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],G,I)),v=async e=>{(await O(e)).code===200&&await d.onSearch()};E(()=>{N.conditionRule=null,N.addConditionRuleSate=null,d.onSearch(),d.tableStyle={scrollX:"100",scrollY:"367px"}});const R=e=>{v(e)};return $(h.SEARCH_DOMAIN,d),(e,t)=>{const m=C("a-button"),b=C("a-popconfirm");return c(),l("div",J,[n(Y,{"search-domain":d},{customOperation:o(()=>[n(m,{type:"primary",onClick:t[0]||(t[0]=k=>r(p).push("/traffic/addRoutingRule/addByFormView"))},{default:o(()=>[a("新增条件路由规则 ")]),_:1})]),bodyCell:o(({text:k,column:i,record:s})=>[i.dataIndex==="ruleName"?(c(),l("span",{key:0,class:"rule-link",onClick:x=>r(p).push(`formview/${s[i.key]}`)},[D("b",null,[n(r(A),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),a(" "+_(k),1)])],8,M)):u("",!0),i.dataIndex==="ruleGranularity"?(c(),l(f,{key:1},[a(_(s.scope==="service"?"服务":"应用"),1)],64)):u("",!0),i.dataIndex==="enabled"?(c(),l(f,{key:2},[a(_(k?"启用":"禁用"),1)],64)):u("",!0),i.dataIndex==="createTime"?(c(),l(f,{key:3},[a(_(r(F)(s.createTime)),1)],64)):u("",!0),i.dataIndex==="operation"?(c(),l(f,{key:4},[n(m,{type:"link",onClick:x=>r(p).push(`formview/${s.ruleName}`)},{default:o(()=>[a(" 查看 ")]),_:2},1032,["onClick"]),n(m,{type:"link",onClick:x=>r(p).push(`/traffic/updateRoutingRule/updateByFormView/${s.ruleName}`)},{default:o(()=>[a(" 修改 ")]),_:2},1032,["onClick"]),n(b,{title:"确认删除该条件路由规则？","ok-text":"Yes","cancel-text":"No",onConfirm:x=>R(s.ruleName)},{default:o(()=>[n(m,{type:"link"},{default:o(()=>[a(" 删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):u("",!0)]),_:1},8,["search-domain"])])}}}),q=B(j,[["__scopeId","data-v-142b26f8"]]);export{q as default};
