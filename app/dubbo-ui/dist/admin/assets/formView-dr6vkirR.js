import{u as L}from"./index-Va7nxJVK.js";import{d as F,k as J,a as K,z as D,r as Q,l as U,W as H,c as $,b as o,w as t,e as i,o as s,f as n,t as r,G as c,n as y,a9 as X,aa as Y,j as g,$ as S,Q as v,J as O,K as j,m as Z,p as ee,h as te,_ as oe}from"./index-hmLAZQYT.js";import{g as le}from"./traffic-C2a-KjHH.js";import"./request-8jI_GZey.js";const A=w=>(ee("data-v-2f7b63ed"),w=w(),te(),w),ae={class:"__container_routingRule_detail"},ne=A(()=>g("p",null,"修改时间: 2024/3/20 15:20:31",-1)),se=A(()=>g("p",null,"版本号: xo842xqpx834",-1)),re=F({__name:"formView",setup(w){const{appContext:{config:{globalProperties:x}}}=J(),M=K(),_=D(!1),N=D(8),z=L().toClipboard;function h(e){Z.success(x.$t("messageDomain.success.copy")),z(e)}const l=Q({configVersion:"v3.0",scope:"service",key:"org.apache.dubbo.samples.UserService",enabled:!0,runtime:!0,force:!1,conditions:["=>host!=192.168.0.68"],group:"",version:""}),B=U(()=>{const e=l.key.split(":");return l.version=e[1]||"",l.group=e[2]||"",e[0]?e[0]:""}),W=D([]),R=D([]);async function E(){var a;let e=await le((a=M.params)==null?void 0:a.ruleName);console.log(e),(e==null?void 0:e.code)===200&&(Object.assign(l,(e==null?void 0:e.data)||{}),l.conditions.forEach((p,C)=>{var k,f;const m=p.split(" => "),u=(k=m[1])==null?void 0:k.split(" & "),b=(f=m[0])==null?void 0:f.split(" & ");W.value=W.value.concat(b),R.value=R.value.concat(u)}))}const G=()=>{var a;const e=(a=M.params)==null?void 0:a.ruleName;if(e&&l.scope==="service"){const p=e==null?void 0:e.split(":");l.version=p[1],l.group=p[2].split(".")[0]}};return H(async()=>{await E(),G()}),(e,a)=>{const p=i("a-typography-title"),C=i("a-button"),m=i("a-flex"),u=i("a-descriptions-item"),b=i("a-typography-paragraph"),k=i("a-descriptions"),f=i("a-card"),T=i("a-row"),P=i("a-tag"),V=i("a-space"),q=i("a-col");return s(),$("div",ae,[o(m,{style:{width:"100%"}},{default:t(()=>[o(q,{span:_.value?24-N.value:24,class:"left"},{default:t(()=>[o(T,null,{default:t(()=>[o(m,{justify:"space-between",style:{width:"100%"}},{default:t(()=>[o(p,{level:3},{default:t(()=>[n(" 基础信息")]),_:1}),o(C,{type:"text",style:{color:"#0a90d5"},onClick:a[0]||(a[0]=d=>_.value=!_.value)},{default:t(()=>[n(r(e.$t("flowControlDomain.versionRecords"))+" ",1),_.value?(s(),c(y(Y),{key:1})):(s(),c(y(X),{key:0}))]),_:1})]),_:1}),o(f,{class:"_detail"},{default:t(()=>[o(k,{column:2,layout:"vertical",title:""},{default:t(()=>[o(u,{label:e.$t("flowControlDomain.ruleName"),labelStyle:{fontWeight:"bold"}},{default:t(()=>[g("p",{class:"description-item-content with-card",onClick:a[1]||(a[1]=d=>h(l.key))},[n(r(l.key)+" ",1),o(y(S))])]),_:1},8,["label"]),o(u,{label:e.$t("flowControlDomain.ruleGranularity"),labelStyle:{fontWeight:"bold"}},{default:t(()=>[o(b,null,{default:t(()=>[n(r(l.scope),1)]),_:1})]),_:1},8,["label"]),l.scope=="service"?(s(),c(u,{key:0,label:"版本",labelStyle:{fontWeight:"bold"}},{default:t(()=>[g("p",{class:"description-item-content with-card",onClick:a[2]||(a[2]=d=>h(l.version))},[n(r(l.version)+" ",1),l.version.length?(s(),c(y(S),{key:0})):v("",!0)])]),_:1})):v("",!0),l.scope=="service"?(s(),c(u,{key:1,label:"分组",labelStyle:{fontWeight:"bold"}},{default:t(()=>[g("p",{class:"description-item-content with-card",onClick:a[3]||(a[3]=d=>h(l.group))},[n(r(l.group)+" ",1),l.group.length?(s(),c(y(S),{key:0})):v("",!0)])]),_:1})):v("",!0),o(u,{label:e.$t("flowControlDomain.actionObject"),labelStyle:{fontWeight:"bold"}},{default:t(()=>[g("p",{class:"description-item-content with-card",onClick:a[4]||(a[4]=d=>h(B.value))},[n(r(B.value)+" ",1),o(y(S))])]),_:1},8,["label"]),o(u,{label:e.$t("flowControlDomain.faultTolerantProtection"),labelStyle:{fontWeight:"bold"}},{default:t(()=>[o(b,null,{default:t(()=>[n(r(l.force?e.$t("flowControlDomain.opened"):e.$t("flowControlDomain.closed")),1)]),_:1})]),_:1},8,["label"]),o(u,{label:e.$t("flowControlDomain.enabledState"),labelStyle:{fontWeight:"bold"}},{default:t(()=>[o(b,null,{default:t(()=>[n(r(l.enabled?e.$t("flowControlDomain.enabled"):e.$t("flowControlDomain.disabled")),1)]),_:1})]),_:1},8,["label"]),o(u,{label:e.$t("flowControlDomain.runTimeEffective"),labelStyle:{fontWeight:"bold"}},{default:t(()=>[o(b,null,{default:t(()=>[n(r(l.runtime?e.$t("flowControlDomain.opened"):e.$t("flowControlDomain.closed")),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),o(f,{style:{"margin-top":"10px"},class:"_detail"},{default:t(()=>[o(V,{align:"start",style:{width:"100%"}},{default:t(()=>[o(p,{level:5},{default:t(()=>[n(r(e.$t("flowControlDomain.requestParameterMatching"))+": ",1)]),_:1}),o(V,{align:"center",direction:"horizontal",size:"middle",wrap:""},{default:t(()=>[(s(!0),$(O,null,j(W.value,(d,I)=>(s(),c(P,{key:I,color:"#2db7f5"},{default:t(()=>[n(r(d),1)]),_:2},1024))),128))]),_:1})]),_:1}),o(V,{align:"start",style:{width:"100%"},wrap:""},{default:t(()=>[o(p,{level:5},{default:t(()=>[n(r(e.$t("flowControlDomain.addressSubsetMatching"))+": ",1)]),_:1}),(s(!0),$(O,null,j(R.value,(d,I)=>(s(),c(P,{key:I,color:"#87d068"},{default:t(()=>[n(r(d),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["span"]),o(q,{span:_.value?N.value:0,class:"right"},{default:t(()=>[_.value?(s(),c(f,{key:0,class:"sliderBox"},{default:t(()=>[(s(),$(O,null,j(2,d=>o(f,{key:d},{default:t(()=>[ne,se,o(m,{justify:"flex-end"},{default:t(()=>[o(C,{type:"text",style:{color:"#0a90d5"}},{default:t(()=>[n("查看")]),_:1}),o(C,{type:"text",style:{color:"#0a90d5"}},{default:t(()=>[n("回滚")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})):v("",!0)]),_:1},8,["span"])]),_:1})])}}}),pe=oe(re,[["__scopeId","data-v-2f7b63ed"]]);export{pe as default};
