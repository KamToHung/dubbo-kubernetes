import{y as g,_ as T}from"./js-yaml-8Gkz3BRW.js";import{f as A}from"./traffic-C2a-KjHH.js";import{d as D,x as O,y as S,u as Y,a as $,z as p,W as L,F as M,G as m,w as e,e as n,o as v,b as a,f as t,n as E,a9 as P,aa as j,j as o,Q as z,p as G,h as J,_ as K}from"./index-hmLAZQYT.js";import"./request-8jI_GZey.js";const r=f=>(G("data-v-169bd129"),f=f(),J(),f),F={class:"editorBox"},Q={class:"bottom-action-footer"},U=r(()=>o("br",null,null,-1)),W=r(()=>o("br",null,null,-1)),q=r(()=>o("br",null,null,-1)),H=r(()=>o("br",null,null,-1)),X=r(()=>o("br",null,null,-1)),Z=r(()=>o("br",null,null,-1)),ee=D({__name:"addByYAMLView",setup(f){const y=O(S.PROVIDE_INJECT_KEY),I=Y();$();const w=p(!1),s=p(!1),h=p(8),u=p(`configVersion: v3.0
force: true
enabled: true
key: shop-detail
tags:
  - name: gray
    match:
      - key: env
        value:
          exact: gray`);L(()=>{if(M.isNil(y.tagRule))u.value="";else{const c=y.tagRule;u.value=g.dump(c)}});const B=c=>{y.tagRule=g.load(u.value)},N=async()=>{const c=g.load(u.value),{configVersion:d,scope:i,key:_,runtime:x,force:V,conditions:b}=c;let l="";i=="application"?l=`${_}.tag-router`:l=`${_}:${d}.tag-router`,(await A(l,c)).code===200&&I.push("/traffic/tagRule")};return(c,d)=>{const i=n("a-button"),_=n("a-flex"),x=n("a-space"),V=n("a-affix"),b=n("a-col"),l=n("a-descriptions-item"),R=n("a-descriptions"),k=n("a-card");return v(),m(k,null,{default:e(()=>[a(_,{style:{width:"100%"}},{default:e(()=>[a(b,{span:s.value?24-h.value:24,class:"left"},{default:e(()=>[a(_,{vertical:"",align:"end"},{default:e(()=>[a(i,{type:"text",style:{color:"#0a90d5"},onClick:d[0]||(d[0]=C=>s.value=!s.value)},{default:e(()=>[t(" 字段说明 "),s.value?(v(),m(E(j),{key:1})):(v(),m(E(P),{key:0}))]),_:1}),o("div",F,[a(T,{onChange:B,modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=C=>u.value=C),theme:"vs-dark",height:500,language:"yaml",readonly:w.value},null,8,["modelValue","readonly"])])]),_:1}),a(V,{"offset-bottom":10},{default:e(()=>[o("div",Q,[a(x,{align:"center",size:"large"},{default:e(()=>[a(i,{type:"primary",onClick:N},{default:e(()=>[t(" 确认 ")]),_:1}),a(i,null,{default:e(()=>[t(" 取消 ")]),_:1})]),_:1})])]),_:1})]),_:1},8,["span"]),a(b,{span:s.value?h.value:0,class:"right"},{default:e(()=>[s.value?(v(),m(k,{key:0,class:"sliderBox"},{default:e(()=>[o("div",null,[a(R,{title:"字段说明",column:1},{default:e(()=>[a(l,{label:"key"},{default:e(()=>[t(" 作用对象"),U,t(" 可能的值：Dubbo应用名或者服务名 ")]),_:1}),a(l,{label:"scope"},{default:e(()=>[t(" 规则粒度"),W,t(" 可能的值：application, service ")]),_:1}),a(l,{label:"force"},{default:e(()=>[t(" 容错保护"),q,t(" 可能的值：true, false"),H,t(" 描述：如果为true，则路由筛选后若没有可用的地址则会直接报异常；如果为false，则会从可用地址中选择完成RPC调用 ")]),_:1}),a(l,{label:"runtime"},{default:e(()=>[t(" 运行时生效"),X,t(" 可能的值：true, false"),Z,t(" 描述：如果为true，则该rule下的所有路由将会实时生效；若为false，则只有在启动时才会生效 ")]),_:1})]),_:1})])]),_:1})):z("",!0)]),_:1},8,["span"])]),_:1})]),_:1})}}}),ne=K(ee,[["__scopeId","data-v-169bd129"]]);export{ne as default};
