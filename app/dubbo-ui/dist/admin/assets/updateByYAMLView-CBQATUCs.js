import{y as p,_ as D}from"./js-yaml-8Gkz3BRW.js";import{e as A,h as O}from"./traffic-C2a-KjHH.js";import{d as P,x as S,y as Y,a as L,u as M,z as f,W as j,F as z,G as m,w as e,e as n,o as v,b as a,f as t,n as w,a9 as J,aa as K,j as o,Q as $,m as F,p as G,h as Q,_ as U}from"./index-hmLAZQYT.js";import"./request-8jI_GZey.js";const _=i=>(G("data-v-50bea4cb"),i=i(),Q(),i),W={class:"editorBox"},q={class:"bottom-action-footer"},H=_(()=>o("br",null,null,-1)),X=_(()=>o("br",null,null,-1)),Z=_(()=>o("br",null,null,-1)),ee=_(()=>o("br",null,null,-1)),ae=_(()=>o("br",null,null,-1)),te=_(()=>o("br",null,null,-1)),le=P({__name:"updateByYAMLView",setup(i){const b=S(Y.PROVIDE_INJECT_KEY),g=L();M();const C=f(!1),c=f(!1),y=f(8);j(()=>{if(z.isNil(b.tagRule))u.value="",h();else{const l=b.tagRule;u.value=p.dump(l)}});const I=l=>{b.tagRule=p.load(u.value)},u=f(`configVersion: v3.0
force: true
enabled: true
key: shop-detail
tags:
  - name: gray
    match:
      - key: env
        value:
          exact: gray`);async function h(){var s;let l=await A((s=g.params)==null?void 0:s.ruleName);(l==null?void 0:l.code)===200&&(u.value=p.dump(l==null?void 0:l.data))}const T=async()=>{var d;const l=p.load(u.value);(await O((d=g.params)==null?void 0:d.ruleName,l)).code===200&&(await h(),F.success("修改成功"))};return(l,s)=>{const d=n("a-button"),x=n("a-flex"),E=n("a-space"),N=n("a-affix"),R=n("a-col"),r=n("a-descriptions-item"),B=n("a-descriptions"),V=n("a-card");return v(),m(V,null,{default:e(()=>[a(x,{style:{width:"100%"}},{default:e(()=>[a(R,{span:c.value?24-y.value:24,class:"left"},{default:e(()=>[a(x,{vertical:"",align:"end"},{default:e(()=>[a(d,{type:"text",style:{color:"#0a90d5"},onClick:s[0]||(s[0]=k=>c.value=!c.value)},{default:e(()=>[t(" 字段说明 "),c.value?(v(),m(w(K),{key:1})):(v(),m(w(J),{key:0}))]),_:1}),o("div",W,[a(D,{onChange:I,modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=k=>u.value=k),theme:"vs-dark",height:500,language:"yaml",readonly:C.value},null,8,["modelValue","readonly"])])]),_:1}),a(N,{"offset-bottom":10},{default:e(()=>[o("div",q,[a(E,{align:"center",size:"large"},{default:e(()=>[a(d,{type:"primary",onClick:T},{default:e(()=>[t(" 确认 ")]),_:1}),a(d,null,{default:e(()=>[t(" 取消 ")]),_:1})]),_:1})])]),_:1})]),_:1},8,["span"]),a(R,{span:c.value?y.value:0,class:"right"},{default:e(()=>[c.value?(v(),m(V,{key:0,class:"sliderBox"},{default:e(()=>[o("div",null,[a(B,{title:"字段说明",column:1},{default:e(()=>[a(r,{label:"key"},{default:e(()=>[t(" 作用对象"),H,t(" 可能的值：Dubbo应用名或者服务名 ")]),_:1}),a(r,{label:"scope"},{default:e(()=>[t(" 规则粒度"),X,t(" 可能的值：application, service ")]),_:1}),a(r,{label:"force"},{default:e(()=>[t(" 容错保护"),Z,t(" 可能的值：true, false"),ee,t(" 描述：如果为true，则路由筛选后若没有可用的地址则会直接报异常；如果为false，则会从可用地址中选择完成RPC调用 ")]),_:1}),a(r,{label:"runtime"},{default:e(()=>[t(" 运行时生效"),ae,t(" 可能的值：true, false"),te,t(" 描述：如果为true，则该rule下的所有路由将会实时生效；若为false，则只有在启动时才会生效 ")]),_:1})]),_:1})])]),_:1})):$("",!0)]),_:1},8,["span"])]),_:1})]),_:1})}}}),ce=U(le,[["__scopeId","data-v-50bea4cb"]]);export{ce as default};
